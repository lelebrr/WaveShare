<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeleWatch Theme Editor</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a2e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #00ffff, #ff00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .preview {
            background: #000;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid var(--primary, #00ff88);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .preview-mascot {
            font-size: 48px;
            text-align: center;
            padding: 20px;
            color: var(--primary, #00ff88);
        }

        .preview-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .preview-btn {
            padding: 10px 20px;
            border-radius: var(--radius, 8px);
            border: none;
            font-weight: bold;
            cursor: pointer;
        }

        .btn-primary {
            background: var(--primary, #00ff88);
            color: #000;
        }

        .btn-secondary {
            background: var(--secondary, #0088ff);
            color: #fff;
        }

        .btn-danger {
            background: var(--danger, #ff0044);
            color: #fff;
        }

        .editor {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
        }

        .editor h2 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .color-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .color-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .color-item label {
            flex: 1;
            font-size: 14px;
            color: #aaa;
        }

        .color-item input[type="color"] {
            width: 50px;
            height: 35px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .slider-item {
            margin-top: 20px;
        }

        .slider-item label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
        }

        .slider-item input[type="range"] {
            width: 100%;
            accent-color: var(--primary, #00ff88);
        }

        .theme-presets {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .preset-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid #333;
            background: #1a1a2e;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
        }

        .preset-btn:hover {
            border-color: var(--primary, #00ff88);
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .preset-btn.active {
            background: var(--primary, #00ff88);
            color: #000;
        }

        .actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .actions button {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            border: none;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .actions button:hover {
            transform: scale(1.02);
        }

        .save-btn {
            background: linear-gradient(90deg, #00ff88, #00ddff);
            color: #000;
        }

        .reset-btn {
            background: #333;
            color: #fff;
        }

        .status {
            text-align: center;
            padding: 10px;
            margin-top: 15px;
            border-radius: 8px;
            display: none;
        }

        .status.success {
            display: block;
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
        }

        .status.error {
            display: block;
            background: rgba(255, 0, 68, 0.2);
            color: #ff0044;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üêâ LeleWatch Theme Editor</h1>

        <div class="theme-presets">
            <button class="preset-btn" onclick="loadPreset('dark_dragon')">Dark Dragon</button>
            <button class="preset-btn" onclick="loadPreset('cyber_purple')">Cyber Purple</button>
            <button class="preset-btn" onclick="loadPreset('matrix')">Matrix</button>
            <button class="preset-btn" onclick="loadPreset('stealth')">Stealth</button>
            <button class="preset-btn" onclick="loadPreset('retro_miami')">Retro Miami</button>
            <button class="preset-btn" onclick="loadPreset('ice_blue')">Ice Blue</button>
        </div>

        <div class="preview" id="preview">
            <div class="preview-header">
                <span style="color: var(--text-dim)">12:34</span>
                <span style="color: var(--success)">üîã 85%</span>
            </div>
            <div class="preview-mascot" id="mascot">(‚Ä¢‚Äø‚Ä¢)</div>
            <div class="preview-buttons">
                <button class="preview-btn btn-primary">Scan</button>
                <button class="preview-btn btn-secondary">BLE</button>
                <button class="preview-btn btn-danger">Attack</button>
            </div>
        </div>

        <div class="editor">
            <h2>üé® Cores do Tema</h2>
            <div class="color-grid">
                <div class="color-item">
                    <label>Prim√°ria</label>
                    <input type="color" id="primary" value="#00ff88" onchange="updateTheme()">
                </div>
                <div class="color-item">
                    <label>Secund√°ria</label>
                    <input type="color" id="secondary" value="#0088ff" onchange="updateTheme()">
                </div>
                <div class="color-item">
                    <label>Acento</label>
                    <input type="color" id="accent" value="#ff00ff" onchange="updateTheme()">
                </div>
                <div class="color-item">
                    <label>Perigo</label>
                    <input type="color" id="danger" value="#ff0044" onchange="updateTheme()">
                </div>
                <div class="color-item">
                    <label>Sucesso</label>
                    <input type="color" id="success" value="#00ff88" onchange="updateTheme()">
                </div>
                <div class="color-item">
                    <label>Aviso</label>
                    <input type="color" id="warning" value="#ffaa00" onchange="updateTheme()">
                </div>
                <div class="color-item">
                    <label>Texto</label>
                    <input type="color" id="text" value="#ffffff" onchange="updateTheme()">
                </div>
                <div class="color-item">
                    <label>Texto Dim</label>
                    <input type="color" id="textDim" value="#888888" onchange="updateTheme()">
                </div>
            </div>

            <div class="slider-item">
                <label>Raio das Bordas: <span id="radiusValue">8</span>px</label>
                <input type="range" id="radius" min="0" max="20" value="8" onchange="updateTheme()">
            </div>
        </div>

        <div class="actions">
            <button class="reset-btn" onclick="resetTheme()">‚Ü∫ Resetar</button>
            <button class="save-btn" onclick="saveTheme()">üíæ Salvar no Dispositivo</button>
        </div>

        <div class="status" id="status"></div>
    </div>

    <script>
        const presets = {
            dark_dragon: { primary: '#8800ff', secondary: '#ff0044', accent: '#ff0088', danger: '#ff0000', success: '#00ff00', warning: '#ff8800', text: '#ffffff', textDim: '#aa88aa', radius: 5 },
            cyber_purple: { primary: '#ff007f', secondary: '#00d4ff', accent: '#9d00ff', danger: '#ff0000', success: '#00ff9f', warning: '#ffd900', text: '#ffffff', textDim: '#8080a0', radius: 8 },
            matrix: { primary: '#00ff00', secondary: '#00aa00', accent: '#00ff00', danger: '#ff0000', success: '#00ff00', warning: '#aaaa00', text: '#00ff00', textDim: '#008800', radius: 0 },
            stealth: { primary: '#660000', secondary: '#440000', accent: '#ff0000', danger: '#ff0000', success: '#004400', warning: '#884400', text: '#880000', textDim: '#440000', radius: 0 },
            retro_miami: { primary: '#ff00aa', secondary: '#00eeff', accent: '#ffaa00', danger: '#ff4444', success: '#44ff88', warning: '#ffee00', text: '#ffeeff', textDim: '#aa88aa', radius: 12 },
            ice_blue: { primary: '#66ccff', secondary: '#3399ff', accent: '#ccffff', danger: '#ff5555', success: '#55ff99', warning: '#ffcc00', text: '#eef5ff', textDim: '#88aacc', radius: 6 }
        };

        function updateTheme() {
            const root = document.documentElement;
            root.style.setProperty('--primary', document.getElementById('primary').value);
            root.style.setProperty('--secondary', document.getElementById('secondary').value);
            root.style.setProperty('--accent', document.getElementById('accent').value);
            root.style.setProperty('--danger', document.getElementById('danger').value);
            root.style.setProperty('--success', document.getElementById('success').value);
            root.style.setProperty('--warning', document.getElementById('warning').value);
            root.style.setProperty('--text', document.getElementById('text').value);
            root.style.setProperty('--text-dim', document.getElementById('textDim').value);

            const radius = document.getElementById('radius').value;
            root.style.setProperty('--radius', radius + 'px');
            document.getElementById('radiusValue').textContent = radius;

            // Update mascot color
            document.getElementById('mascot').style.color = document.getElementById('primary').value;
        }

        function loadPreset(name) {
            const preset = presets[name];
            if (!preset) return;

            document.getElementById('primary').value = preset.primary;
            document.getElementById('secondary').value = preset.secondary;
            document.getElementById('accent').value = preset.accent;
            document.getElementById('danger').value = preset.danger;
            document.getElementById('success').value = preset.success;
            document.getElementById('warning').value = preset.warning;
            document.getElementById('text').value = preset.text;
            document.getElementById('textDim').value = preset.textDim;
            document.getElementById('radius').value = preset.radius;

            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            updateTheme();
        }

        function resetTheme() {
            loadPreset('dark_dragon');
        }

        async function saveTheme() {
            const theme = {
                primary: document.getElementById('primary').value,
                secondary: document.getElementById('secondary').value,
                accent: document.getElementById('accent').value,
                danger: document.getElementById('danger').value,
                success: document.getElementById('success').value,
                warning: document.getElementById('warning').value,
                text: document.getElementById('text').value,
                textDim: document.getElementById('textDim').value,
                radius: parseInt(document.getElementById('radius').value)
            };

            try {
                const response = await fetch('/api/theme/save', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(theme)
                });

                const status = document.getElementById('status');
                if (response.ok) {
                    status.className = 'status success';
                    status.textContent = '‚úì Tema salvo com sucesso!';
                } else {
                    status.className = 'status error';
                    status.textContent = '‚úó Erro ao salvar tema';
                }

                setTimeout(() => { status.className = 'status'; }, 3000);
            } catch (err) {
                const status = document.getElementById('status');
                status.className = 'status error';
                status.textContent = '‚úó Erro de conex√£o';
                setTimeout(() => { status.className = 'status'; }, 3000);
            }
        }

        // Init
        updateTheme();
    </script>
</body>

</html>